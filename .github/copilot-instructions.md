# Copilot Instructions for stavros-lib

- Big picture: small Python 3.13 utility library. Modules: `stavroslib/dict.py` (dict merge), `stavroslib/misc.py` (RestCountries lookup + plyer notifications), `stavroslib/parse.py` (YAML loader), `stavroslib/pdf.py` (ReportLab font registration + text styles). Fonts live under `fonts/` and are referenced by relative filename.
- External dependencies: `requests` hits `https://restcountries.com/v2/name/<country>`; tests currently call the live API—prefer to stub/mimic responses if adding tests. `plyer` for notifications (may no-op in headless CI). `reportlab` expects the bundled font files; call `register_pdf_fonts()` before generating styled content. YAML parsing uses `yaml.load(..., Loader=yaml.FullLoader)`.
- Dev tooling: uses UV for env/deps. Typical flow: `uv venv` → `uv sync --all-extras` (installs dev extras) → `uv run pytest` or `uv run pytest --cov=stavroslib --cov-report=term-missing`. Pyproject declares dev extras (pytest, pytest-cov, mypy, basedpyright, types-* stubs).
- Tests: live in `stavroslib/tests/` (pytest). Coverage gaps noted historically around notification branch in `misc.py` and font registration in `pdf.py`; add targeted tests/mocking if you change those areas. Keep tests fast and avoid network when possible.
- Conventions: keep modules minimal and typed. Prefer snake_case functions and concise docstrings. Return plain dict/list structures; no classes in current codebase. Maintain relative font paths exactly as in `pdf.py` when registering new fonts.
- OpenSpec: for any planning/proposal/spec work, read `openspec/AGENTS.md` (and the top-level `AGENTS.md`). Existing specs under `openspec/specs/dependency-management/`; archived change under `openspec/changes/archive/2025-12-27-adopt-uv-package-manager/`. Follow OpenSpec rules before altering specs or introducing new capabilities.
- Repo hygiene: no existing `.github` rules beyond this file. Keep edits ASCII unless file already uses Unicode. Do not revert user changes; avoid destructive git commands.
- Quick commands: format/lint not enforced by tooling here; rely on type hints and keep code straightforward. To run a one-off test: `uv run pytest stavroslib/tests/test_x.py::test_name`. To check types: `uv run mypy` (config in `pyproject.toml`).
